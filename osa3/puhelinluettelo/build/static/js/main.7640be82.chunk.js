(this["webpackJsonppuhelinluettelo-frontend"]=this["webpackJsonppuhelinluettelo-frontend"]||[]).push([[0],{14:function(e,n,t){e.exports=t(38)},19:function(e,n,t){},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),c=t(13),r=t.n(c),l=(t(19),t(2)),u=t(3),i=t.n(u),s="/api/persons",m=function(){return i.a.get(s).then((function(e){return e.data}))},d=function(e){return i.a.post(s,e).then((function(e){return e.data}))},f=function(e){return i.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},h=(t(37),function(e){var n=e.message;return null===n?null:o.a.createElement("div",{className:"error"},n)}),g=function(e){var n=e.person,t=e.handleClick;return o.a.createElement("h4",null,n.name," ",n.number," ",o.a.createElement("button",{name:n.name,id:n.id,onClick:t},"Remove"))},v=function(e){var n=e.persons,t=e.filter_string,a=e.handleClick,c=n.filter((function(e){return e.name.includes(t)}));return o.a.createElement("div",null,c.map((function(e){return o.a.createElement(g,{handleClick:a,key:e.name,person:e})})))},b=function(e){var n=e.changeFunction,t=e.filter;return o.a.createElement(o.a.Fragment,null,"filter shown with: ",o.a.createElement("input",{onChange:n,value:t}))},p=function(e){var n=e.newNumber,t=e.newName,a=e.addPerson,c=e.handleNameChange,r=e.handleNumberChange;return o.a.createElement("form",{onSubmit:a},o.a.createElement("h2",null,"Add a new"),o.a.createElement("div",null,"name: ",o.a.createElement("input",{onChange:c,value:t})),o.a.createElement("div",null,"number: ",o.a.createElement("input",{onChange:r,value:n})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add")))},E=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],c=n[1],r=Object(a.useState)(""),u=Object(l.a)(r,2),i=u[0],s=u[1],g=Object(a.useState)(""),E=Object(l.a)(g,2),w=E[0],C=E[1],k=Object(a.useState)(""),j=Object(l.a)(k,2),O=j[0],N=j[1],y=Object(a.useState)(""),P=Object(l.a)(y,2),S=P[0],T=P[1];Object(a.useEffect)((function(){console.log("effect"),m().then((function(e){console.log("initialPersons:",e),c(e),T("People loaded from server successfully"),setTimeout((function(){T(null)}),5e3)})).catch((function(e){T("Unable load initial phonenumbers from the server"),setTimeout((function(){T(null)}),5e3)}))}),[]);return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(h,{message:S}),o.a.createElement(b,{changeFunction:function(e){console.log(O),N(e.target.value)},filter:O}),o.a.createElement(p,{newName:i,newNumber:w,handleNumberChange:function(e){console.log(w),C(e.target.value)},handleNameChange:function(e){console.log(i),s(e.target.value)},addPerson:function(e){e.preventDefault();var n={name:i,number:w};d(n).then((function(e){c(t.concat(e)),s(""),C(""),T("".concat(n.name," added.")),setTimeout((function(){T(null)}),5e3)})).catch((function(e){T(e.response.data.error),setTimeout((function(){T(null)}),5e3)}))}}),o.a.createElement("h2",null,"Numbers"),o.a.createElement(v,{handleClick:function(e){var n=e.target.id,a=e.target.name;if(console.log("In handleRemoveClick"),console.log(n),!0===window.confirm("Do you really want to remove ".concat(a,"?"))){f(n).then((function(e){T("".concat(a," removed.")),setTimeout((function(){T(null)}),5e3)})).catch((function(e){T("Removing the person called: ".concat(a," FAILED!")),setTimeout((function(){T(null)}),5e3)}));var o=t.filter((function(e){return e.id!==n?(console.log("person.id: ".concat(e.id," removedPersonId: ").concat(n)),!0):(console.log("person.id: ".concat(e.id," removedPersonId: ").concat(n)),!1)}));c(o),console.log(t)}},persons:t,filter_string:O}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[14,1,2]]]);
//# sourceMappingURL=main.7640be82.chunk.js.map